(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[116],{1189:function(e){e.exports=JSON.parse('{"version":"0.1.0","name":"solview_staking","instructions":[{"name":"initialize","accounts":[{"name":"authority","isMut":false,"isSigner":false},{"name":"stakingMint","isMut":false,"isSigner":false},{"name":"stakingVault","isMut":false,"isSigner":false},{"name":"poolSigner","isMut":false,"isSigner":false},{"name":"pool","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"poolNonce","type":"u8"}]},{"name":"createUser","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"owner","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"nonce","type":"u8"}]},{"name":"stake","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"stakingVault","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"owner","isMut":false,"isSigner":true},{"name":"stakeFromAccount","isMut":true,"isSigner":false},{"name":"poolSigner","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"},{"name":"stakingType","type":"u64"}]},{"name":"unstake","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"stakingVault","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"owner","isMut":false,"isSigner":true},{"name":"stakeFromAccount","isMut":true,"isSigner":false},{"name":"poolSigner","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"sptAmount","type":"u64"},{"name":"stakingType","type":"u64"}]},{"name":"authorizeFunder","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"funderToAdd","type":"publicKey"}]},{"name":"deauthorizeFunder","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"funderToRemove","type":"publicKey"}]},{"name":"fundStaking","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"stakingVault","isMut":true,"isSigner":false},{"name":"funder","isMut":true,"isSigner":true},{"name":"from","isMut":true,"isSigner":false},{"name":"poolSigner","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"withdraw","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"stakingVault","isMut":true,"isSigner":false},{"name":"funder","isMut":false,"isSigner":true},{"name":"from","isMut":true,"isSigner":false},{"name":"poolSigner","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"claim","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"stakingVault","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"owner","isMut":false,"isSigner":true},{"name":"rewardAAccount","isMut":true,"isSigner":false},{"name":"poolSigner","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"stakingType","type":"u64"}]}],"accounts":[{"name":"Pool","type":{"kind":"struct","fields":[{"name":"authority","type":"publicKey"},{"name":"nonce","type":"u8"},{"name":"paused","type":"bool"},{"name":"stakingMint","type":"publicKey"},{"name":"stakingVault","type":"publicKey"},{"name":"userStakeCount","type":"u32"},{"name":"funders","type":{"array":["publicKey",5]}},{"name":"adminRewardAmount","type":"u64"}]}},{"name":"User","type":{"kind":"struct","fields":[{"name":"pool","type":"publicKey"},{"name":"owner","type":"publicKey"},{"name":"rewardA","type":"u64"},{"name":"rewardB","type":"u64"},{"name":"rewardC","type":"u64"},{"name":"rewardARate","type":"u64"},{"name":"rewardBRate","type":"u64"},{"name":"rewardCRate","type":"u64"},{"name":"balanceStakedA","type":"u64"},{"name":"balanceStakedB","type":"u64"},{"name":"balanceStakedC","type":"u64"},{"name":"lastUpdateTimeA","type":"u64"},{"name":"lastUpdateTimeB","type":"u64"},{"name":"lastUpdateTimeC","type":"u64"},{"name":"stakeTimeA","type":"u64"},{"name":"stakeTimeB","type":"u64"},{"name":"stakeTimeC","type":"u64"},{"name":"nonce","type":"u8"},{"name":"stakingType","type":"u64"}]}}],"errors":[{"code":6000,"name":"InsufficientFundUnstake","msg":"Insufficient funds to unstake."},{"code":6001,"name":"AmountMustBeGreaterThanZero","msg":"Amount must be greater than zero."},{"code":6002,"name":"SingleStakeTokenBCannotBeFunded","msg":"Reward B cannot be funded - pool is single stake."},{"code":6003,"name":"PoolPaused","msg":"Pool is paused."},{"code":6004,"name":"DurationTooShort","msg":"Duration cannot be shorter than one day."},{"code":6005,"name":"FunderAlreadyAuthorized","msg":"Provided funder is already authorized to fund."},{"code":6006,"name":"MaxFunders","msg":"Maximum funders already authorized."},{"code":6007,"name":"CannotDeauthorizePoolAuthority","msg":"Cannot deauthorize the primary pool authority."},{"code":6008,"name":"CannotDeauthorizeMissingAuthority","msg":"Authority not found for deauthorization."},{"code":6009,"name":"NotEnoughUnstakePeriod","msg":"Can unstake only after 30 days more."}]}')},1190:function(e){e.exports=JSON.parse("[46,83,117,93,238,67,72,208,148,153,195,215,71,185,6,0,3,92,67,0,59,151,181,2,229,58,9,12,90,137,8,88]")},1191:function(e,t,a){},2055:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(441),s=a(442),i=a(214),c=a.n(i),u=a(453),o=a(454),l=a.n(o),m=a(459),d=a(23),p=a(443),b=a(444),f=a(455),g=a(943),j=a(958),h=a(432),x=a(468),y=a(748),k=a(1188),O=a(1189),S=a(1190),w=(a(1191),a(1327)),M=a(1438),v=a(60),A=a.n(v),P=a(7);a(688);a(748),y.web3.SystemProgram,y.web3.Keypair,y.web3.SYSVAR_CLOCK_PUBKEY;var C=new x.PublicKey("E4VP5CqmKCy7HLzCyZg3FaKLoCE5M9nLhyZLWPMjeeQ6"),K=new x.PublicKey(new Uint8Array(S)),N="processed",T=function(){var e=Object(w.b)().publicKey,t=Object(w.b)(),a=Object(M.b)().connection,i=Object(n.useState)(0),c=Object(d.a)(i,2),u=c[0],o=c[1],S=Object(n.useState)(0),v=Object(d.a)(S,2),T=v[0],_=v[1],B=Object(n.useState)(0),D=Object(d.a)(B,2),R=D[0],L=D[1],U=Object(n.useState)(0),V=Object(d.a)(U,2),F=V[0],z=V[1],E=Object(n.useState)(0),W=Object(d.a)(E,2),Z=W[0],q=W[1],H=function(){var e=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://admin.solview.app/staking/init",e.next=3,A.a.get("https://admin.solview.app/staking/init");case 3:(t=e.sent).data.data&&q(t.data.data.length);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(m.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new y.Provider(a,t,N),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(m.a)(l.a.mark((function e(a){var n,r,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}return e.abrupt("return",0);case 2:return e.next=4,I();case 4:return n=e.sent,e.next=7,n.connection.getTokenAccountsByOwner(t.publicKey,{mint:a});case 7:if(0!==(r=e.sent).value.length){e.next=10;break}return e.abrupt("return",0);case 10:return s=r.value.pop(),e.next=13,n.connection.getTokenAccountBalance(s.pubkey);case 13:i=e.sent.value,o(i.uiAmount);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(m.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:return t=e.sent,a=new y.Program(O,C,t),e.next=6,a.account.pool.fetch(K);case 6:n=e.sent,z(n.adminRewardAmount.toNumber()/Math.pow(10,6));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(m.a)(l.a.mark((function e(a){var n,r,s,i,c,o,m,p,b,f,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a){e.next=3;break}return alert("Balance is 0!"),e.abrupt("return");case 3:if(!(a>u)){e.next=6;break}return alert("This is more than your balance!"),e.abrupt("return");case 6:return e.next=8,I();case 8:return n=e.sent,r=new y.Program(O,C,n),s=K,e.next=13,r.account.pool.fetch(s);case 13:return i=e.sent,c=new k.b(n.connection,new x.PublicKey("7q3AdgKuMeDRnjaMQs7ppXjaw4HUxjsdyMrrfiSZraiN"),k.a,n.wallet.payer),e.next=17,c.getOrCreateAssociatedAccountInfo(t.publicKey);case 17:return o=e.sent,m=o.address,e.next=21,x.PublicKey.findProgramAddress([s.toBuffer()],C);case 21:return p=e.sent,b=Object(d.a)(p,2),f=b[0],b[1],g=f,e.prev=26,e.next=29,r.rpc.fundStaking(new y.BN(a*Math.pow(10,6)),{accounts:{pool:s,stakingVault:i.stakingVault,funder:n.wallet.publicKey,from:m,poolSigner:g,tokenProgram:k.a}});case 29:X(),Q(new x.PublicKey("7q3AdgKuMeDRnjaMQs7ppXjaw4HUxjsdyMrrfiSZraiN")),e.next=36;break;case 33:e.prev=33,e.t0=e.catch(26),console.log(e.t0);case 36:case"end":return e.stop()}}),e,null,[[26,33]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(m.a)(l.a.mark((function e(a){var n,r,s,i,c,u,o,m,p,b,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:if(n=e.sent,0!==a){e.next=6;break}return alert("Balance is 0!"),e.abrupt("return");case 6:if(!(a>F)){e.next=9;break}return alert("This is more than your balance!"),e.abrupt("return");case 9:return r=new y.Program(O,C,n),s=K,e.next=13,r.account.pool.fetch(s);case 13:return i=e.sent,c=new k.b(n.connection,new x.PublicKey("7q3AdgKuMeDRnjaMQs7ppXjaw4HUxjsdyMrrfiSZraiN"),k.a,n.wallet.payer),e.next=17,c.getOrCreateAssociatedAccountInfo(t.publicKey);case 17:return u=e.sent,o=u.address,e.next=21,x.PublicKey.findProgramAddress([s.toBuffer()],C);case 21:return m=e.sent,p=Object(d.a)(m,2),b=p[0],p[1],f=b,e.prev=26,e.next=29,r.rpc.withdraw(new y.BN(a*Math.pow(10,6)),{accounts:{pool:s,stakingVault:i.stakingVault,funder:n.wallet.publicKey,from:o,poolSigner:f,tokenProgram:k.a}});case 29:X(),Q(new x.PublicKey("7q3AdgKuMeDRnjaMQs7ppXjaw4HUxjsdyMrrfiSZraiN")),e.next=36;break;case 33:e.prev=33,e.t0=e.catch(26),console.log(e.t0);case 36:case"end":return e.stop()}}),e,null,[[26,33]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){e&&(H(),X(),Q(new x.PublicKey("7q3AdgKuMeDRnjaMQs7ppXjaw4HUxjsdyMrrfiSZraiN")))}),[e]),Object(P.jsx)(p.a,{children:Object(P.jsxs)(b.a,{children:[Object(P.jsxs)(r.a,{children:[Object(P.jsx)(s.a,{md:"4",sm:"12",children:Object(P.jsxs)(f.a,{id:"solvBalance",children:["SOLV Balance: ",u?u.toFixed(4):0," SOLV"]})}),Object(P.jsx)(s.a,{md:"4",sm:"12",children:Object(P.jsxs)(f.a,{id:"userCount",children:["Users Count: ",Z]})}),Object(P.jsx)(s.a,{md:"4",sm:"12",children:Object(P.jsxs)(f.a,{id:"rewardAmount",children:["Reward Amount: ",F?F.toFixed(4):0," SOLV"]})})]}),Object(P.jsxs)(r.a,{id:"RewardManage",children:[Object(P.jsx)(s.a,{md:"6",sm:"12",children:Object(P.jsxs)(r.a,{children:[Object(P.jsx)(s.a,{md:"12",sm:"12",children:Object(P.jsxs)(g.a,{children:[Object(P.jsx)(f.a,{for:"input",id:"depositeAmt",children:"Deposit"}),Object(P.jsx)(j.a,{type:"text",value:T,onChange:function(e){return _(e.target.value)},id:"url"})]})}),Object(P.jsx)(s.a,{md:"12",sm:"12",children:Object(P.jsxs)(r.a,{children:[Object(P.jsx)(s.a,{md:"9",sm:"9",id:"maxBtn",children:Object(P.jsx)(h.a,{onClick:function(){return _(u)},children:"MAX"})}),Object(P.jsx)(s.a,{md:"3",sm:"3",id:"approveBtn",children:Object(P.jsx)(h.a,{onClick:function(){return J(T)},children:"APPROVE"})})]})})]})}),Object(P.jsx)(s.a,{md:"6",sm:"12",children:Object(P.jsxs)(r.a,{children:[Object(P.jsx)(s.a,{me:"12",sm:"12",children:Object(P.jsxs)(g.a,{children:[Object(P.jsx)(f.a,{for:"input",id:"withdrawAmt",children:"Withdraw"}),Object(P.jsx)(j.a,{type:"text",value:R,onChange:function(e){return L(e.target.value)},id:"url"})]})}),Object(P.jsx)(s.a,{md:"12",sm:"12",children:Object(P.jsxs)(r.a,{children:[Object(P.jsx)(s.a,{md:"9",sm:"9",id:"maxBtn",children:Object(P.jsx)(h.a,{onClick:function(){return L(F)},children:"MAX"})}),Object(P.jsx)(s.a,{md:"3",sm:"3",id:"approveBtn",children:Object(P.jsx)(h.a,{onClick:function(){return Y(R)},children:"APPROVE"})})]})})]})})]})]})})};a(446);A.a.get("/api/datatables/initial-data").then((function(e){e.data}));var _=[{name:"Account",selector:"account",sortable:!0,minWidth:"300px",cell:function(e){return Object(P.jsx)("a",{href:"https://solscan.io/account/".concat(e.account),target:"_blank",children:e.account})}},{name:"7D Staked Amount",selector:"staked_amount_7",sortable:!0,minWidth:"250px"},{name:"14D Staked Amount",selector:"staked_amount_14",sortable:!0,minWidth:"250px"},{name:"30D Staked Amount",selector:"staked_amount_30",sortable:!0,minWidth:"150px"},{name:"7D Staked Time",selector:"staked_time_7",sortable:!0,minWidth:"150px"},{name:"14D Staked Time",selector:"staked_time_14",sortable:!0,minWidth:"150px"},{name:"30D Staked Time",selector:"staked_time_30",sortable:!0,minWidth:"150px"},{name:"14D Rewards",selector:"reward_14",sortable:!0,minWidth:"150px"},{name:"30D Rewards",selector:"reward_30",sortable:!0,minWidth:"150px"}],B=function(e){return function(){var t=Object(m.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.a.get("/api/datatables/data",e).then((function(t){a({type:"GET_DATA",allData:t.data.allData,data:t.data.invoices,totalPages:t.data.total,params:e})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},D=a(102),R=a(472),L=a.n(R),U=a(991),V=a(512),F=a.n(V),z=a(448),E=a(445);a(688);y.web3.SystemProgram,y.web3.Keypair,y.web3.SYSVAR_CLOCK_PUBKEY;var W=new x.PublicKey("E4VP5CqmKCy7HLzCyZg3FaKLoCE5M9nLhyZLWPMjeeQ6"),Z=new x.PublicKey(new Uint8Array(S)),q="processed",H=function(){Object(w.b)().publicKey;var e=Object(w.b)(),t=Object(M.b)().connection,a=Object(D.b)(),r=(Object(D.c)((function(e){return e.dataTables})),Object(n.useState)(0)),s=Object(d.a)(r,2),i=s[0],c=s[1],u=Object(n.useState)(7),o=Object(d.a)(u,2),b=o[0],f=(o[1],Object(n.useState)(0)),g=Object(d.a)(f,2),j=g[0],h=g[1],k=Object(n.useState)(""),S=Object(d.a)(k,2),v=S[0],C=(S[1],Object(n.useState)([])),K=Object(d.a)(C,2),N=K[0],T=K[1];Object(n.useEffect)((function(){a(B({page:i,perPage:b,q:v}))}),[a]);var R=function(){var a=Object(m.a)(l.a.mark((function a(){var n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=new y.Provider(t,e,q),a.abrupt("return",n);case 2:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),V=function(){var e=Object(m.a)(l.a.mark((function e(t){var a,n,r,s,i,c,u,o,m,p,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"curr"),"https://admin.solview.app/staking/init",e.next=4,A.a.get("https://admin.solview.app/staking/init");case 4:return a=e.sent,e.next=7,R();case 7:if(n=e.sent,r=new y.Program(O,W,n),!a.data.data){e.next=47;break}h(a.data.data.length),s=[],i=10*t;case 13:if(!(i<10*(t+1)-1)){e.next=45;break}return e.prev=14,c=a.data.data[i],u={},e.next=19,x.PublicKey.findProgramAddress([new x.PublicKey(a.data.data[i].account).toBuffer(),Z.toBuffer()],W);case 19:return o=e.sent,m=Object(d.a)(o,2),p=m[0],m[1],e.next=25,r.account.user.fetch(p);case 25:b=e.sent,console.log(b,"i"),u.account=c.account,u.staked_amount_7=b.balanceStakedA.toNumber()/Math.pow(10,6),u.staked_amount_14=b.balanceStakedB.toNumber()/Math.pow(10,6),u.staked_amount_30=b.balanceStakedC.toNumber()/Math.pow(10,6),u.staked_time_7=new Date(1e3*b.stakeTimeA.toNumber()).toISOString(),u.staked_time_14=new Date(1e3*b.stakeTimeB.toNumber()).toISOString(),u.staked_time_30=new Date(1e3*b.stakeTimeC.toNumber()).toISOString(),(new Date).getTime()/1e3-b.stakeTimeB.toNumber()>1209600&&(u.reward_14=(5*b.balanceStakedB.toNumber()/365/24/60/60/100/Math.pow(10,6)*((new Date).getTime()/1e3-b.lastUpdateTimeB.toNumber())).toFixed(6)),(new Date).getTime()/1e3-b.stakeTimeC.toNumber()>2592e3&&(u.reward_30=(10*b.balanceStakedC.toNumber()/365/24/60/60/100/Math.pow(10,6)*((new Date).getTime()/1e3-b.lastUpdateTimeC.toNumber())).toFixed(6)),s.push(u),e.next=42;break;case 39:e.prev=39,e.t0=e.catch(14),console.log(e.t0);case 42:i++,e.next=13;break;case 45:console.log(s,"userData"),T(s);case 47:case"end":return e.stop()}}),e,null,[[14,39]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){V(0)}),[]);return Object(P.jsx)(n.Fragment,{children:Object(P.jsxs)(p.a,{children:[Object(P.jsx)(z.a,{className:"border-bottom",children:Object(P.jsx)(E.a,{tag:"h4",children:"Users"})}),Object(P.jsx)(F.a,{noHeader:!0,pagination:!0,paginationServer:!0,className:"react-dataTable",columns:_,sortIcon:Object(P.jsx)(U.a,{size:10}),paginationComponent:function(){var e=Number((j/10).toFixed(0));return Object(P.jsx)(L.a,{previousLabel:"",nextLabel:"",breakLabel:"...",pageCount:e||1,marginPagesDisplayed:2,pageRangeDisplayed:2,activeClassName:"active",forcePage:0!==i?i-1:0,onPageChange:function(e){return function(e){console.log(e,"page"),c(e.selected+1),V(e.selected)}(e)},pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"})},data:N})]})})},I=Object(n.memo)(H);a(495),t.default=function(){return Object(n.useEffect)((function(){c.a.highlightAll()})),Object(P.jsx)(n.Fragment,{children:Object(P.jsxs)(r.a,{className:"match-height",children:[Object(P.jsx)(s.a,{md:"12",sm:"12",children:Object(P.jsx)(u.a,{title:"Staking Management",id:"StakingTitle",children:Object(P.jsx)(T,{})})}),Object(P.jsx)(s.a,{md:"12",sm:"12",children:Object(P.jsx)(I,{})})]})})}},453:function(e,t,a){"use strict";var n=a(23),r=a(1),s=a(1004),i=a(444),c=a(443),u=a(448),o=a(445),l=a(692),m=a(7);t.a=function(e){var t=e.title,a=e.children,d=e.noBody,p=e.code,b=e.iconCode,f=Object(r.useState)(!1),g=Object(n.a)(f,2),j=g[0],h=g[1],x=b||Object(m.jsx)(s.a,{size:15}),y=d?r.Fragment:i.a;return Object(m.jsxs)(c.a,{className:"card-snippet",children:[Object(m.jsxs)(u.a,{children:[Object(m.jsx)(o.a,{tag:"h4",children:t}),Object(m.jsx)("div",{className:"views cursor-pointer",onClick:function(){return h(!j)},children:x})]}),Object(m.jsx)(y,{children:a}),Object(m.jsx)(l.a,{isOpen:j,children:Object(m.jsx)(i.a,{children:p})})]})}},495:function(e,t,a){}}]);
//# sourceMappingURL=116.33888206.chunk.js.map