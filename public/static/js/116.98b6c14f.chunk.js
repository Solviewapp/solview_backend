(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[116],{1176:function(e){e.exports=JSON.parse('{"version":"0.1.0","name":"solview_staking","instructions":[{"name":"initialize","accounts":[{"name":"authority","isMut":false,"isSigner":false},{"name":"stakingMint","isMut":false,"isSigner":false},{"name":"stakingVault","isMut":false,"isSigner":false},{"name":"poolSigner","isMut":false,"isSigner":false},{"name":"pool","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"poolNonce","type":"u8"}]},{"name":"createUser","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"owner","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"nonce","type":"u8"}]},{"name":"stake","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"stakingVault","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"owner","isMut":false,"isSigner":true},{"name":"stakeFromAccount","isMut":true,"isSigner":false},{"name":"poolSigner","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"},{"name":"stakingType","type":"u64"}]},{"name":"unstake","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"stakingVault","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"owner","isMut":false,"isSigner":true},{"name":"stakeFromAccount","isMut":true,"isSigner":false},{"name":"poolSigner","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"sptAmount","type":"u64"},{"name":"stakingType","type":"u64"}]},{"name":"authorizeFunder","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"funderToAdd","type":"publicKey"}]},{"name":"deauthorizeFunder","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"funderToRemove","type":"publicKey"}]},{"name":"fundStaking","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"stakingVault","isMut":true,"isSigner":false},{"name":"funder","isMut":true,"isSigner":true},{"name":"from","isMut":true,"isSigner":false},{"name":"poolSigner","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"withdraw","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"stakingVault","isMut":true,"isSigner":false},{"name":"funder","isMut":false,"isSigner":true},{"name":"from","isMut":true,"isSigner":false},{"name":"poolSigner","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"claim","accounts":[{"name":"pool","isMut":true,"isSigner":false},{"name":"stakingVault","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"owner","isMut":false,"isSigner":true},{"name":"rewardAAccount","isMut":true,"isSigner":false},{"name":"poolSigner","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"stakingType","type":"u64"}]}],"accounts":[{"name":"Pool","type":{"kind":"struct","fields":[{"name":"authority","type":"publicKey"},{"name":"nonce","type":"u8"},{"name":"paused","type":"bool"},{"name":"stakingMint","type":"publicKey"},{"name":"stakingVault","type":"publicKey"},{"name":"userStakeCount","type":"u32"},{"name":"funders","type":{"array":["publicKey",5]}},{"name":"adminRewardAmount","type":"u64"}]}},{"name":"User","type":{"kind":"struct","fields":[{"name":"pool","type":"publicKey"},{"name":"owner","type":"publicKey"},{"name":"rewardA","type":"u64"},{"name":"rewardB","type":"u64"},{"name":"rewardC","type":"u64"},{"name":"rewardARate","type":"u64"},{"name":"rewardBRate","type":"u64"},{"name":"rewardCRate","type":"u64"},{"name":"balanceStakedA","type":"u64"},{"name":"balanceStakedB","type":"u64"},{"name":"balanceStakedC","type":"u64"},{"name":"lastUpdateTimeA","type":"u64"},{"name":"lastUpdateTimeB","type":"u64"},{"name":"lastUpdateTimeC","type":"u64"},{"name":"stakeTimeA","type":"u64"},{"name":"stakeTimeB","type":"u64"},{"name":"stakeTimeC","type":"u64"},{"name":"nonce","type":"u8"},{"name":"stakingType","type":"u64"}]}}],"errors":[{"code":6000,"name":"InsufficientFundUnstake","msg":"Insufficient funds to unstake."},{"code":6001,"name":"AmountMustBeGreaterThanZero","msg":"Amount must be greater than zero."},{"code":6002,"name":"SingleStakeTokenBCannotBeFunded","msg":"Reward B cannot be funded - pool is single stake."},{"code":6003,"name":"PoolPaused","msg":"Pool is paused."},{"code":6004,"name":"DurationTooShort","msg":"Duration cannot be shorter than one day."},{"code":6005,"name":"FunderAlreadyAuthorized","msg":"Provided funder is already authorized to fund."},{"code":6006,"name":"MaxFunders","msg":"Maximum funders already authorized."},{"code":6007,"name":"CannotDeauthorizePoolAuthority","msg":"Cannot deauthorize the primary pool authority."},{"code":6008,"name":"CannotDeauthorizeMissingAuthority","msg":"Authority not found for deauthorization."},{"code":6009,"name":"NotEnoughUnstakePeriod","msg":"Can unstake only after 30 days more."}]}')},1177:function(e){e.exports=JSON.parse("[46,83,117,93,238,67,72,208,148,153,195,215,71,185,6,0,3,92,67,0,59,151,181,2,229,58,9,12,90,137,8,88]")},1178:function(e,t,a){},1982:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(440),s=a(441),i=a(214),u=a.n(i),c=a(452),o=a(453),l=a.n(o),m=a(459),d=a(23),p=a(442),b=a(443),f=a(454),g=a(927),j=a(942),h=a(431),x=a(467),y=a(735),k=a(1175),O=a(1176),w=a(1177),S=(a(1178),a(1297)),M=a(1408),v=a(60),A=a.n(v),P=a(7);a(680);a(735),y.web3.SystemProgram,y.web3.Keypair,y.web3.SYSVAR_CLOCK_PUBKEY;var C=new x.PublicKey("E4VP5CqmKCy7HLzCyZg3FaKLoCE5M9nLhyZLWPMjeeQ6"),K=new x.PublicKey(new Uint8Array(w)),N="processed",_=function(){var e=Object(S.b)().publicKey,t=Object(S.b)(),a=Object(M.b)().connection,i=Object(n.useState)(0),u=Object(d.a)(i,2),c=u[0],o=u[1],w=Object(n.useState)(0),v=Object(d.a)(w,2),_=v[0],T=v[1],B=Object(n.useState)(0),D=Object(d.a)(B,2),R=D[0],L=D[1],U=Object(n.useState)(0),V=Object(d.a)(U,2),F=V[0],z=V[1],E=Object(n.useState)(0),W=Object(d.a)(E,2),Z=W[0],q=W[1],H=function(){var e=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://admin.solview.app/staking/init",e.next=3,A.a.get("https://admin.solview.app/staking/init");case 3:(t=e.sent).data.data&&q(t.data.data.length);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(m.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new y.Provider(a,t,N),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(m.a)(l.a.mark((function e(a){var n,r,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}return e.abrupt("return",0);case 2:return e.next=4,I();case 4:return n=e.sent,e.next=7,n.connection.getTokenAccountsByOwner(t.publicKey,{mint:a});case 7:if(0!==(r=e.sent).value.length){e.next=10;break}return e.abrupt("return",0);case 10:return s=r.value.pop(),e.next=13,n.connection.getTokenAccountBalance(s.pubkey);case 13:i=e.sent.value,o(i.uiAmount);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(m.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:return t=e.sent,a=new y.Program(O,C,t),e.next=6,a.account.pool.fetch(K);case 6:n=e.sent,z(n.adminRewardAmount.toNumber()/Math.pow(10,6));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(m.a)(l.a.mark((function e(a){var n,r,s,i,u,o,m,p,b,f,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a){e.next=3;break}return alert("Balance is 0!"),e.abrupt("return");case 3:if(!(a>c)){e.next=6;break}return alert("This is more than your balance!"),e.abrupt("return");case 6:return e.next=8,I();case 8:return n=e.sent,r=new y.Program(O,C,n),s=K,e.next=13,r.account.pool.fetch(s);case 13:return i=e.sent,u=new k.b(n.connection,new x.PublicKey("7q3AdgKuMeDRnjaMQs7ppXjaw4HUxjsdyMrrfiSZraiN"),k.a,n.wallet.payer),e.next=17,u.getOrCreateAssociatedAccountInfo(t.publicKey);case 17:return o=e.sent,m=o.address,e.next=21,x.PublicKey.findProgramAddress([s.toBuffer()],C);case 21:return p=e.sent,b=Object(d.a)(p,2),f=b[0],b[1],g=f,e.prev=26,e.next=29,r.rpc.fundStaking(new y.BN(a*Math.pow(10,6)),{accounts:{pool:s,stakingVault:i.stakingVault,funder:n.wallet.publicKey,from:m,poolSigner:g,tokenProgram:k.a}});case 29:X(),Q(new x.PublicKey("7q3AdgKuMeDRnjaMQs7ppXjaw4HUxjsdyMrrfiSZraiN")),e.next=36;break;case 33:e.prev=33,e.t0=e.catch(26),console.log(e.t0);case 36:case"end":return e.stop()}}),e,null,[[26,33]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(m.a)(l.a.mark((function e(a){var n,r,s,i,u,c,o,m,p,b,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:if(n=e.sent,0!==a){e.next=6;break}return alert("Balance is 0!"),e.abrupt("return");case 6:if(!(a>F)){e.next=9;break}return alert("This is more than your balance!"),e.abrupt("return");case 9:return r=new y.Program(O,C,n),s=K,e.next=13,r.account.pool.fetch(s);case 13:return i=e.sent,u=new k.b(n.connection,new x.PublicKey("7q3AdgKuMeDRnjaMQs7ppXjaw4HUxjsdyMrrfiSZraiN"),k.a,n.wallet.payer),e.next=17,u.getOrCreateAssociatedAccountInfo(t.publicKey);case 17:return c=e.sent,o=c.address,e.next=21,x.PublicKey.findProgramAddress([s.toBuffer()],C);case 21:return m=e.sent,p=Object(d.a)(m,2),b=p[0],p[1],f=b,e.prev=26,e.next=29,r.rpc.withdraw(new y.BN(a*Math.pow(10,6)),{accounts:{pool:s,stakingVault:i.stakingVault,funder:n.wallet.publicKey,from:o,poolSigner:f,tokenProgram:k.a}});case 29:X(),Q(new x.PublicKey("7q3AdgKuMeDRnjaMQs7ppXjaw4HUxjsdyMrrfiSZraiN")),e.next=36;break;case 33:e.prev=33,e.t0=e.catch(26),console.log(e.t0);case 36:case"end":return e.stop()}}),e,null,[[26,33]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){e&&(H(),X(),Q(new x.PublicKey("7q3AdgKuMeDRnjaMQs7ppXjaw4HUxjsdyMrrfiSZraiN")))}),[e]),Object(P.jsx)(p.a,{children:Object(P.jsxs)(b.a,{children:[Object(P.jsxs)(r.a,{children:[Object(P.jsx)(s.a,{md:"4",sm:"12",children:Object(P.jsxs)(f.a,{id:"solvBalance",children:["SOLV Balance: ",c?c.toFixed(4):0," SOLV"]})}),Object(P.jsx)(s.a,{md:"4",sm:"12",children:Object(P.jsxs)(f.a,{id:"userCount",children:["Users Count: ",Z]})}),Object(P.jsx)(s.a,{md:"4",sm:"12",children:Object(P.jsxs)(f.a,{id:"rewardAmount",children:["Reward Amount: ",F?F.toFixed(4):0," SOLV"]})})]}),Object(P.jsxs)(r.a,{id:"RewardManage",children:[Object(P.jsx)(s.a,{md:"6",sm:"12",children:Object(P.jsxs)(r.a,{children:[Object(P.jsx)(s.a,{md:"12",sm:"12",children:Object(P.jsxs)(g.a,{children:[Object(P.jsx)(f.a,{for:"input",id:"depositeAmt",children:"Deposit"}),Object(P.jsx)(j.a,{type:"text",value:_,onChange:function(e){return T(e.target.value)},id:"url"})]})}),Object(P.jsx)(s.a,{md:"12",sm:"12",children:Object(P.jsxs)(r.a,{children:[Object(P.jsx)(s.a,{md:"9",sm:"9",id:"maxBtn",children:Object(P.jsx)(h.a,{onClick:function(){return T(c)},children:"MAX"})}),Object(P.jsx)(s.a,{md:"3",sm:"3",id:"approveBtn",children:Object(P.jsx)(h.a,{onClick:function(){return J(_)},children:"APPROVE"})})]})})]})}),Object(P.jsx)(s.a,{md:"6",sm:"12",children:Object(P.jsxs)(r.a,{children:[Object(P.jsx)(s.a,{me:"12",sm:"12",children:Object(P.jsxs)(g.a,{children:[Object(P.jsx)(f.a,{for:"input",id:"withdrawAmt",children:"Withdraw"}),Object(P.jsx)(j.a,{type:"text",value:R,onChange:function(e){return L(e.target.value)},id:"url"})]})}),Object(P.jsx)(s.a,{md:"12",sm:"12",children:Object(P.jsxs)(r.a,{children:[Object(P.jsx)(s.a,{md:"9",sm:"9",id:"maxBtn",children:Object(P.jsx)(h.a,{onClick:function(){return L(F)},children:"MAX"})}),Object(P.jsx)(s.a,{md:"3",sm:"3",id:"approveBtn",children:Object(P.jsx)(h.a,{onClick:function(){return Y(R)},children:"APPROVE"})})]})})]})})]})]})})};a(444);A.a.get("/api/datatables/initial-data").then((function(e){e.data}));var T=[{name:"Account",selector:"account",sortable:!0,minWidth:"300px",cell:function(e){return Object(P.jsx)("a",{href:"https://solscan.io/account/".concat(e.account),target:"_blank",children:e.account})}},{name:"7D Staked Amount",selector:"staked_amount_7",sortable:!0,minWidth:"250px"},{name:"14D Staked Amount",selector:"staked_amount_14",sortable:!0,minWidth:"250px"},{name:"30D Staked Amount",selector:"staked_amount_30",sortable:!0,minWidth:"150px"},{name:"7D Staked Time",selector:"staked_time_7",sortable:!0,minWidth:"150px"},{name:"14D Staked Time",selector:"staked_time_14",sortable:!0,minWidth:"150px"},{name:"30D Staked Time",selector:"staked_time_30",sortable:!0,minWidth:"150px"},{name:"14D Rewards",selector:"reward_14",sortable:!0,minWidth:"150px"},{name:"30D Rewards",selector:"reward_30",sortable:!0,minWidth:"150px"}],B=function(e){return function(){var t=Object(m.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.a.get("/api/datatables/data",e).then((function(t){a({type:"GET_DATA",allData:t.data.allData,data:t.data.invoices,totalPages:t.data.total,params:e})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},D=a(101),R=a(470),L=a.n(R),U=a(975),V=a(509),F=a.n(V),z=a(447),E=a(445);a(680);y.web3.SystemProgram,y.web3.Keypair,y.web3.SYSVAR_CLOCK_PUBKEY;var W=new x.PublicKey("E4VP5CqmKCy7HLzCyZg3FaKLoCE5M9nLhyZLWPMjeeQ6"),Z=new x.PublicKey(new Uint8Array(w)),q="processed",H=function(){Object(S.b)().publicKey;var e=Object(S.b)(),t=Object(M.b)().connection,a=Object(D.b)(),s=(Object(D.c)((function(e){return e.dataTables})),Object(n.useState)(1)),i=Object(d.a)(s,2),u=i[0],c=i[1],o=Object(n.useState)(7),b=Object(d.a)(o,2),f=b[0],g=(b[1],Object(n.useState)("")),j=Object(d.a)(g,2),h=j[0],k=(j[1],Object(n.useState)([])),w=Object(d.a)(k,2),v=w[0],C=w[1];Object(n.useEffect)((function(){a(B({page:u,perPage:f,q:h}))}),[a]);var K=function(){var a=Object(m.a)(l.a.mark((function a(){var n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=new y.Provider(t,e,q),a.abrupt("return",n);case 2:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(l.a.mark((function e(){var t,a,n,r,s,i,u,c,o,m,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://admin.solview.app/staking/init",e.next=3,A.a.get("https://admin.solview.app/staking/init");case 3:return t=e.sent,e.next=6,K();case 6:if(a=e.sent,n=new y.Program(O,W,a),!t.data.data){e.next=43;break}r=[],s=0;case 11:if(!(s<t.data.data.length)){e.next=42;break}return e.prev=12,i=t.data.data[s],u={},e.next=17,x.PublicKey.findProgramAddress([new x.PublicKey(t.data.data[s].account).toBuffer(),Z.toBuffer()],W);case 17:return c=e.sent,o=Object(d.a)(c,2),m=o[0],o[1],e.next=23,n.account.user.fetch(m);case 23:p=e.sent,u.account=i.account,u.staked_amount_7=p.balanceStakedA.toNumber()/Math.pow(10,6),u.staked_amount_14=p.balanceStakedB.toNumber()/Math.pow(10,6),u.staked_amount_30=p.balanceStakedC.toNumber()/Math.pow(10,6),u.staked_time_7=new Date(1e3*p.stakeTimeA.toNumber()).toISOString(),u.staked_time_14=new Date(1e3*p.stakeTimeB.toNumber()).toISOString(),u.staked_time_30=new Date(1e3*p.stakeTimeC.toNumber()).toISOString(),(new Date).getTime()/1e3-p.stakeTimeB.toNumber()>1209600&&(u.reward_14=(p.rewardBRate.toNumber()/Math.pow(10,6)*((new Date).getTime()/1e3-p.lastUpdateTimeB.toNumber())).toFixed(6)),(new Date).getTime()/1e3-p.stakeTimeC.toNumber()>2592e3&&(u.reward_30=(p.rewardCRate.toNumber()/Math.pow(10,6)*((new Date).getTime()/1e3-p.lastUpdateTimeC.toNumber())).toFixed(6)),0===u.staked_amount_7&&0===u.staked_amount_30&&0===u.staked_amount_30?console.log("not user"):r.push(u),e.next=39;break;case 36:e.prev=36,e.t0=e.catch(12),console.log(e.t0);case 39:s++,e.next=11;break;case 42:C(r);case 43:case"end":return e.stop()}}),e,null,[[12,36]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){N()}),[]);return Object(P.jsx)(n.Fragment,{children:Object(P.jsxs)(p.a,{children:[Object(P.jsx)(z.a,{className:"border-bottom",children:Object(P.jsx)(E.a,{tag:"h4",children:"Users"})}),Object(P.jsx)(r.a,{className:"mx-0 mt-1 mb-50"}),Object(P.jsx)(F.a,{noHeader:!0,pagination:!0,paginationServer:!0,className:"react-dataTable",columns:T,sortIcon:Object(P.jsx)(U.a,{size:10}),paginationComponent:function(){var e=Number((v/f).toFixed(0));return Object(P.jsx)(L.a,{previousLabel:"",nextLabel:"",breakLabel:"...",pageCount:e||1,marginPagesDisplayed:2,pageRangeDisplayed:2,activeClassName:"active",forcePage:0!==u?u-1:0,onPageChange:function(e){return function(e){a(B({page:e.selected+1,perPage:f,q:h})),c(e.selected+1)}(e)},pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"})},data:v})]})})},I=Object(n.memo)(H);a(493),t.default=function(){return Object(n.useEffect)((function(){u.a.highlightAll()})),Object(P.jsx)(n.Fragment,{children:Object(P.jsxs)(r.a,{className:"match-height",children:[Object(P.jsx)(s.a,{md:"12",sm:"12",children:Object(P.jsx)(c.a,{title:"Staking Management",id:"StakingTitle",children:Object(P.jsx)(_,{})})}),Object(P.jsx)(s.a,{md:"12",sm:"12",children:Object(P.jsx)(I,{})})]})})}},452:function(e,t,a){"use strict";var n=a(23),r=a(1),s=a(988),i=a(443),u=a(442),c=a(447),o=a(445),l=a(681),m=a(7);t.a=function(e){var t=e.title,a=e.children,d=e.noBody,p=e.code,b=e.iconCode,f=Object(r.useState)(!1),g=Object(n.a)(f,2),j=g[0],h=g[1],x=b||Object(m.jsx)(s.a,{size:15}),y=d?r.Fragment:i.a;return Object(m.jsxs)(u.a,{className:"card-snippet",children:[Object(m.jsxs)(c.a,{children:[Object(m.jsx)(o.a,{tag:"h4",children:t}),Object(m.jsx)("div",{className:"views cursor-pointer",onClick:function(){return h(!j)},children:x})]}),Object(m.jsx)(y,{children:a}),Object(m.jsx)(l.a,{isOpen:j,children:Object(m.jsx)(i.a,{children:p})})]})}},493:function(e,t,a){}}]);
//# sourceMappingURL=116.98b6c14f.chunk.js.map